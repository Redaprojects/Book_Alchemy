{% extends "base.html" %}

{% block content %}
<h2>ðŸ“š AI Book Recommendation</h2>

{% if error %}
  <div class="alert alert-danger">{{ error }}</div>
{% elif suggestion %}
  <div class="alert alert-success">
    <!-- image cover_url -->
    <div class="alert alert-success">
  {% if cover_url %}
    <img src="{{ cover_url }}" alt="Book Cover" class="img-fluid mb-3 rounded shadow" style="max-height: 300px;">
  {% endif %}

  <div class="recommendation-text">
    {{ suggestion|safe }}
  </div>

  <div class="mt-2">
    <small class="text-muted">Source: {{ recs[0].source | capitalize }}</small>
  </div>
</div>


    {{ suggestion }}
    <br>
    <small class="text-muted">
      Source: {{ recs[0].source | capitalize }}
    </small>
  </div>
{% else %}
  <p>No suggestion yet. Click below to get one!</p>
{% endif %}

<form method="POST">
  <button class="btn btn-primary">ðŸ”„ Regenerate Suggestion</button>
  <a href="{{ url_for('home') }}" class="btn btn-secondary">Back</a>
</form>

{% if recs %}
  <h4 class="mt-4">ðŸ•“ Recent Suggestions</h4>
  <ul class="list-group">
    {% for rec in recs %}
      <li class="list-group-item">
        <strong>{{ rec.source | capitalize }}</strong> â€“
        {{ rec.timestamp.strftime('%Y-%m-%d %H:%M') }}<br>
        {{ rec.suggestion }}
      </li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock %}
